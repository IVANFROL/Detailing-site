# Инструкция для ручного деплоя на сервер

## Проблема с SSH
Сервер закрывает SSH соединение. Возможные причины:
- Изменились настройки SSH на сервере
- Требуется другой метод аутентификации
- Проблемы с firewall или fail2ban

## Ручной деплой

### 1. Подключение к серверу
```bash
ssh root@45.95.234.84
# Введите пароль: h7-SfjHCN+9_nb
```

### 2. Обновление кода
```bash
cd /var/www/sls-detailing
git pull origin main
```

### 3. Установка зависимостей
```bash
pnpm install
```

### 4. Сборка проекта
```bash
pnpm build
```

### 5. Перезапуск приложения
```bash
pm2 restart sls-detailing
pm2 status
```

### 6. Проверка nginx
```bash
nginx -t
systemctl reload nginx
```

### 7. Проверка сайта
- https://sls-detailing.ru
- https://слс-дэтаилинг.рф

## Альтернативные методы

### Через веб-интерфейс хостинга
Если у вас есть доступ к панели управления хостингом, можно:
1. Загрузить файлы через веб-интерфейс
2. Распаковать архив в директорию сайта
3. Перезапустить сервисы

### Через FTP/SFTP
```bash
# Если настроен SFTP
sftp root@45.95.234.84
# Введите пароль: h7-SfjHCN+9_nb
put -r . /var/www/sls-detailing/
```

## Проверка статуса сервера
```bash
# Проверка доступности
ping 45.95.234.84

# Проверка SSH порта
nc -zv 45.95.234.84 22

# Проверка веб-порта
nc -zv 45.95.234.84 80
nc -zv 45.95.234.84 443
```

## Возможные решения проблемы SSH

### 1. Проверка логов SSH на сервере
```bash
tail -f /var/log/auth.log
```

### 2. Проверка настроек SSH
```bash
cat /etc/ssh/sshd_config | grep -E "(PasswordAuthentication|PubkeyAuthentication|PermitRootLogin)"
```

### 3. Перезапуск SSH сервиса
```bash
systemctl restart ssh
```

### 4. Проверка fail2ban
```bash
fail2ban-client status sshd
```

## Контакты для поддержки
Если проблема с SSH не решается, обратитесь к администратору сервера или в службу поддержки хостинга.

